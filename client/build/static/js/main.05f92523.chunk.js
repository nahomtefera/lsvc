(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{36:function(e,t,n){e.exports=n(78)},41:function(e,t,n){},42:function(e,t,n){},72:function(e,t){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){e.exports=n.p+"static/media/videosvg.3e889147.svg"},78:function(e,t,n){"use strict";n.r(t);var a,o,r=n(0),s=n.n(r),c=n(34),i=n.n(c),l=(n(41),n(1)),u=n(2),m=n(4),d=n(3),f=(n(42),n(35)),v=n.n(f),g=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e;console.log("production"),console.log(window.location.hostname),e="https://livestreamm.herokuapp.com/",console.log(e),a=v.a.connect(e,{secure:!0})}},{key:"render",value:function(){return null}}]),n}(r.Component),h=n(12),p=(n(75),function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).handleChange=function(e,t){o.setState(Object(h.a)({},t,e))},o.login=function(){var e=o.state.username;""!=e&&a.emit("new user",e,(function(e){e&&(console.log(e),o.props.isLogged())}))},o.state={username:""},o}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.state.username,n=this.handleChange;return s.a.createElement("div",{className:"login-container"},s.a.createElement("input",{autoComplete:"off",type:"text",className:"username",onChange:function(e){n(e.target.value,"username")},value:t}),s.a.createElement("button",{onClick:function(){e.login()},id:"user-login-btn"},"Login"))}}]),n}(r.Component)),b=n(11),w=(n(76),function(e){Object(m.a)(o,e);var t=Object(d.a)(o);function o(e){var n;return Object(l.a)(this,o),(n=t.call(this,e)).state={users:[]},n}return Object(u.a)(o,[{key:"componentDidMount",value:function(){var e=this;a.on("get users",(function(t){e.setState({users:t})}))}},{key:"render",value:function(){var e=this.state.users,t=this.props.createOffer;return s.a.createElement("div",{className:"users-container"},s.a.createElement("h3",{styles:{fontWeight:"500",padding:"1em .5em"}},"Online Users"),s.a.createElement("ul",{className:"users-list"},e.map((function(e,a){return s.a.createElement("li",{key:a,className:"username-item",id:e.id},e.username,s.a.createElement("div",{className:"camera-icon"},s.a.createElement("img",{onClick:function(){t(e.id)},src:n(77),alt:"video-icon"})))}))))}}]),o}(r.Component)),O=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).handleChange=function(e,t){o.setState(Object(h.a)({},t,e))},o.sendMessage=function(e){a.emit("send message",e),o.setState({message:""})},o.state={message:"",chatMessages:[]},o}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.state.chatMessages;a.on("new message",(function(n){t.push(n),e.setState({chatMessages:t})}))}},{key:"render",value:function(){var e=this.state.message,t=this.state.chatMessages,n=this.handleChange,a=this.sendMessage;return s.a.createElement("div",{className:"chat-container"},s.a.createElement("div",{className:"chat-messages"},0===t.length?null:t.map((function(e,t){return s.a.createElement("div",{key:t,className:"chat-message"},s.a.createElement("strong",null,e.user)," ",e.msg)}))),s.a.createElement("div",{className:"send-message-container"},s.a.createElement("input",{type:"text",className:"chat-msg",onChange:function(e){n(e.target.value,"message")},value:e}),s.a.createElement("button",{className:"chat-btn",onClick:function(){a(e)}},"Send")))}}]),n}(r.Component),E=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={},a}return Object(u.a)(n,[{key:"render",value:function(){return s.a.createElement("div",{className:"videostream-container"},s.a.createElement("div",{id:"video-container"},s.a.createElement("video",{className:"video-stream",autoPlay:!0,muted:!0})))}}]),n}(r.Component),j={},k=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection||window.msRTCPeerConnection,C=window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription||window.msRTCSessionDescription;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var y=new k({iceServers:[{url:"stun:stun.services.mozilla.com",username:"somename",credential:"somecredentials"}]}),M=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).error=function(e){console.warn("Error",e)},o.createOffer=function(e){var t=Object(b.a)(o);y.createOffer((function(n){console.log("making offer: ",n),y.setLocalDescription(new C(n),(function(){a.emit("make-offer",{offer:n,to:e})}),t.error)}),t.error),console.log(e)},o.state={videos:[]},o}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;y.onaddstream=function(e){console.log("pscstream:",e);var t=document.createElement("video");t.setAttribute("class","video-stream"),t.setAttribute("autoplay","autoplay"),t.setAttribute("id","video-small"),document.getElementById("video-container").appendChild(t),t.srcObject=e.stream},navigator.getUserMedia({video:!0,audio:!0},(function(e){document.querySelector("video").srcObject=e,y.addStream(e)}),e.error),a.on("answer-made",(function(t){y.setRemoteDescription(new C(t.answer),(function(){document.getElementById(t.socket).classList.add("active"),j[t.socket]||(e.createOffer(t.socket),j[t.socket]=!0)}),e.error)})),a.on("offer-made",(function(t){o=t.offer,console.log(o),y.setRemoteDescription(new C(t.offer),(function(){y.createAnswer((function(n){y.setLocalDescription(new C(n),(function(){console.log("MAKE ANSWER"),a.emit("make-answer",{answer:n,to:t.socket})}),e.error)}),e.error)}),e.error)}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"livestream-container"},s.a.createElement(w,{createOffer:this.createOffer}),s.a.createElement(O,null),s.a.createElement(E,null))}}]),n}(r.Component),N=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).isLogged=function(){a.setState({logged:!0})},a.state={logged:!1},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state.logged;return s.a.createElement("div",{className:"App"},s.a.createElement(g,null),e?s.a.createElement(M,null):s.a.createElement(p,{isLogged:this.isLogged}))}}]),n}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.05f92523.chunk.js.map